##### Basics #####

# Start window/pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# allow easy resetting to sensible layout accross machines
bind m set-window-option main-pane-height 60\; select-layout main-horizontal

# reload configs
bind r source $XDG_CONFIG_HOME/tmux/tmux.conf\; display 'config sourced!'

# History
set -g history-limit 10000

# Mouse support (resize/move/select with mouse)
set -g mouse on

# Use vi-style keys in copy mode
setw -g mode-keys vi

##### Splits & navigation #####

# Pane navigation with Ctrl-h/j/k/l (vim-style)
bind -r ^ last-window
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-\\ select-pane -R

# does not work
# Resize panes with Alt + h/j/k/l
bind -r M-h resize-pane -L 5
bind -r M-j resize-pane -D 5
bind -r M-k resize-pane -U 5
bind -r M-l resize-pane -R 5

##### Status bar #####

# status line
set -g status-interval 2

# left side (keep your style)
set -g status-left-length 85
set -g status-left "#[fg=colour135] #S"

# current window (keep your preferred version)
set -g window-status-current-format "#[fg=black,bold bg=default]│#[fg=colour135 bg=black] #I #W#[fg=black,bold bg=default]│"
# {?window_last_flag,\uf7d9,} "
set -g window-status-format "#[fg=brightwhite,bg=default]    #I #W "

# RIGHT SIDE → add date + time (minimal + matching your aesthetic)
set -g status-right "#[fg=colour244]%Y-%m-%d #[fg=colour39]%H:%M "

# general bar style
set -g status-style bg=default
set -g status-justify centre

##### Terminal / Colors #####

# Use tmux's proper 256color entry inside tmux (modern)
set -g default-terminal "tmux-256color"

# Enable truecolor passthrough to the *outer terminal*
set -as terminal-overrides ",xterm-256color:RGB"

###### COPYING ######

# Use vi keys in copy mode
setw -g mode-keys vi

# Enter copy mode (keeps your Escape habit)
bind-key Escape copy-mode

# Make v/V/C-v behave like Vim selections
bind-key -T copy-mode-vi v   send-keys -X begin-selection
bind-key -T copy-mode-vi V   send-keys -X select-line
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

# tmux-only copy (internal buffer)
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Windows clipboard copy
bind-key -T copy-mode-vi Y send-keys -X copy-pipe-and-cancel "clip.exe"

# Optional: mouse drag copies to Windows clipboard
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "clip.exe"

# Clipboard history (unchanged)
bind-key P choose-buffer
bind-key + delete-buffer \; display-message "Deleted current Tmux Clipboard History"

# Do NOT automatically sync tmux buffer to system clipboard (OSC 52)
set -g set-clipboard off

# Paste from tmux buffer
# prefix + ]
# Explore tmux buffer copy history
# prefix + P
